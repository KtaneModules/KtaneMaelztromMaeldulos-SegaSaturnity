<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Breakers â€” Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .dark table, table {
            margin: 1em auto;
            border: none;
        }
    </style>
    <script>
        function setDefaultRules(rnd){
            var firstTable = document.getElementById("firstTable");
            var secondTable = document.getElementById("secondTable");
            var startingPositions = [
                ["RLLL", "LLLR", "RLRR", "RRRL", "RLRL"],
                ["LLLL", "RRLL", "LRLR", "LRRL", "LLRL"],
                ["LRRR", "LLRR", "RLLR", "LRLL", "RRLR"],
                ["RRLR", "LRRL", "LLRL", "RLRR", "LRLR"]
            ];
            var characters = [
                ["E G 4 9", "I N 5 6", "D T 2 3", "C L 7 8"],
                ["Q U 2 8", "P Z 3 7", "H V 4 5", "B W 6 9"],
                ["J R 6 7", "M X 2 9", "K A 5 8", "S F 3 4"]
            ];
            for(var i = 0; i < 4; i++){
                for(var j = 1; j < 6; j++){
                    firstTable.children[i].children[j].innerHTML = "<b>" + startingPositions[i][j - 1] + "</b>";
                }
            }
            for(var i = 0; i < 3; i++){
                for(var j = 1; j < 5; j++){
                    secondTable.children[i].children[j].innerHTML = "<b>" + characters[i][j - 1] + "</b>";
                }
            }
        }
        function setRules(rnd){
            var LR = ["L", "R"];
            var letters = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Z"];
            rnd.shuffleFisherYates(letters);
            console.log(letters);
            var firstTable = document.getElementById("firstTable");
            var secondTable = document.getElementById("secondTable");
            for(var i = 0; i < 4; i++){
                for(var j = 1; j < 6; j++){
                    firstTable.children[i].children[j].innerHTML = "<b>" + LR[rnd.next(0,2)] + LR[rnd.next(0,2)] + LR[rnd.next(0,2)] + LR[rnd.next(0,2)] + "</b>";
                }
            }
            var index = 0;
            for(var i = 0; i < 3; i++){
                for(var j = 1; j < 5; j++){
                    secondTable.children[i].children[j].innerHTML = "<b>" + letters[index] + " " + letters[index + 1] + " " + rnd.next(0, 10) + " " + rnd.next(0, 10) + "</b>";
                    index += 2;
                }
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Breakers</span>
            </div>
            <div class="page-content">
            <img src="img/Component/Breakers.svg" class="diagram">
                <h2>On the Subject of Breakers</h2>
                <p class="flavour-text">Oh no, did I break something?</p>
                <ul>
                    <li>You must flip all of the breakers to the right.</li>
                    <li>The black breakers may be flipped at any time.</li>
                    <li>Only flip a colorful breaker when the black breakers are in the proper positions. Order breakers top to bottom.</li>
                    <li>Use the first table below to determine the positions the black breakers must start in, based on the color of the colorful breaker to be flipped.</li>
                    <li>From the starting position, flip the black breakers back and forth according the the criteria listed in the second table below before flipping the respective colorful breaker.</li>
                </ul>
                <h3>Starting Position</h3>
                <table style="text-align:center;margin-top:10px;margin-bottom:30px;width:100%"><thead><tr>
                    <th style="width:20%" rowspan=2>Color of the Breaker</th><th colspan=5 style="border-bottom:hidden">Highest Digit in the Serial Number</th>
                    </tr>
                    <tr style="border-top:hidden"><td style="border-right:hidden">0-4</td><td style="border-left:hidden;border-right:hidden">5-6</td><td style="border-left:hidden;border-right:hidden">7</td><td style="border-left:hidden;border-right:hidden">8</td><td style="border-left:hidden">9</td></tr>
                    </thead>
                    <tbody id="firstTable">
                    <tr><td style="background-color:#f08080">Red</td><td></td><td></td><td></td><td></td><td></td>
                    <tr><td style="background-color:#87cefa">Blue</td><td></td><td></td><td></td><td></td><td></td>
                    <tr><td style="background-color:#90ee90">Green</td><td></td><td></td><td></td><td></td><td></td>
                    <tr><td style="background-color:#fffacd">Yellow</td><td></td><td></td><td></td><td></td><td></td>
                    </tbody>
                </table>
                <h3>Further Adjustments</h3>
                <table style="text-align:center;float:right;margin-top:10px;margin-left:20px;margin-bottom:10px;width:50%">
                    <thead>
                        <tr><th style="width:10%" rowspan=2>Colorful Breaker</th><th colspan=4 style="border-bottom:hidden">Black Breaker</th></tr>
                        <tr style="border-top:hidden"><td style="border-right:hidden">1st</td><td style="border-left:hidden;border-right:hidden">2nd</td><td style="border-left:hidden;border-right:hidden">3rd</td><td style="border-left:hidden">4th</td></tr>
                    </thead>
                    <tbody id="secondTable">
                        <tr><td>1st</td><td></td><td></td><td></td><td></td></tr>
                        <tr><td>2nd</td><td></td><td></td><td></td><td></td></tr>
                        <tr><td>3rd</td><td></td><td></td><td></td><td></td></tr>
                    </tbody>
                </table>
                <p>For each colorful breaker, from the starting position, flip each given black breaker
                    every time a character given by the table appears in the serial number.
                    Each black breaker may need to be flipped several times, but only final position matters.
                    </p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>
